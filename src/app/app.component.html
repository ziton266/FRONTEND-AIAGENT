<div class="chat-container">
  <button (click)="toggleChat()" class="chat-toggle">
    Ouvrir le chat
  </button>

  <div class="chat-modal" [class.show]="showChat">
    <div class="chat-header">
      <h5 class="title">Comment puis-je vous aider ?</h5>
      <button (click)="toggleChat()" class="close-btn">×</button>
    </div>

    <div class="chat-body">
      <div class="messages-container">
        <div *ngFor="let message of messages; let i = index" 
             class="message" 
             [class.sent]="message.sent" [class.received]="!message.sent">
          
          <div *ngIf="message.isFile" class="file-indicator">
            <i class="file-icon"></i>
            {{ message.fileName }}
          </div>
          <div class="message-content">{{ message.text }}</div>
        </div>
      </div>
    </div>

    <div class="chat-footer">
      <div *ngIf="selectedFile" class="selected-file">
        <span>
          <i class="file-icon"></i>
          {{ selectedFile?.name }}
        </span>
        <button (click)="removeSelectedFile()" class="remove-file-btn">×</button>
      </div>
      
      <div class="input-group">
        <button class="file-upload-btn" (click)="fileInput.click()">
          <i class="upload-icon"></i>
        </button>
        <input type="file" 
               #fileInput 
               style="display: none;" 
               (change)="onFileSelected($event)" 
               accept=".pdf">
        
        <input type="text"
               [(ngModel)]="newMessage" 
               placeholder="Tapez votre message..." 
               (keyup.enter)="sendMessage()">
        
        <button (click)="sendMessage()" [disabled]="isLoading">
          <span *ngIf="isLoading">
            <i class="loading-icon"></i>
          </span>
          <span *ngIf="!isLoading">
            Envoyer
          </span>
        </button>
      </div>

      <div class="assistant-avatar">
        <img src="assets/assistant-avatar.png" alt="Assistant">
      </div>
    </div>
  </div>
</div>


